<?xml version="1.0" encoding="UTF-8"?>
<form:Form xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dync="http://www.chinacreator.com/platform/mvc/ui/dync" xmlns:form="http://www.chinacreator.com/platform/mvc/form" name="节点设置表单" sn="servicemanageactivityconfig" type="form">
  <form:control type="page/modal">
    <form:attributes source="page/modal">
      <dync:attribute default="" group="HTML" id="title" name="标题" value="节点设置">
        <dync:render/>
        <dync:children/>
      </dync:attribute>
      <dync:attribute default="" group="事件" id="afterDataSourceLoad" name="数据源加载后" value="page_afterDataSourceLoad()">
        <dync:render/>
        <dync:children/>
      </dync:attribute>
      <dync:attribute default="" group="事件" id="onload" name="页面加载完成" value="page_onload()">
        <dync:render/>
        <dync:children/>
      </dync:attribute>
    </form:attributes>
  </form:control>
  <form:child xsi:type="form:Group" id="newGroupId" name="新分组">
    <form:control type="container/div">
      <form:attributes source="container/div">
        <dync:attribute default="false" group="HTML配置" id="pure" name="简单div" value="false">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="12" group="HTML配置" id="span" name="占位数" value="12">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="0" group="HTML配置" id="offset" name="偏移" value="0">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="" group="HTML配置" id="collapse" name="隐藏" value="">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="false" group="HTML配置" id="defaultCollapse" name="隐藏默认值" value="false">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="false" group="HTML配置" id="autoHeight" name="自动高度" value="true">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="" group="高级自定义" id="html" name="自定义HTML" value="">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="" group="高级自定义" id="cssClass" name="自定义class" value="">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="" group="高级自定义" id="style" name="自定义style" value="overflow:visible">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
      </form:attributes>
    </form:control>
    <form:child xsi:type="form:Group" id="newGroup" name="Tabs">
      <form:control type="container/tabs">
        <form:attributes source="container/tabs"/>
      </form:control>
      <form:child xsi:type="form:Group" id="newTab1" name="基本信息">
        <form:control type="container/tab">
          <form:attributes source="container/tab">
            <dync:attribute default="false" group="HTML配置" id="active" name="选中" value="true">
              <dync:render/>
              <dync:children/>
            </dync:attribute>
          </form:attributes>
        </form:control>
        <form:child xsi:type="form:Field" binding="$model.activity_Name" id="newField" name="节点名称" customize="true">
          <form:control type="widget/text">
            <form:attributes source="widget/text"/>
          </form:control>
          <form:validation/>
        </form:child>
      </form:child>
      <form:child xsi:type="form:Group" id="newGroup6" name="操作">
        <form:control type="container/tab">
          <form:attributes source="container/tab"/>
        </form:control>
        <form:child xsi:type="form:Field" binding="$model.text" id="newField6" name="处理操作" customize="true">
          <form:control type="widget/span">
            <form:attributes source="widget/span">
              <dync:attribute default="6" group="基础属性" id="span" name="占位数" value="4">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="false" group="基础属性" id="showLable" name="显示lable" value="true">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="75" group="基础属性" id="lableWidth" name="lable宽度" value="150">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:validation/>
        </form:child>
        <form:child xsi:type="form:Group" id="newGroup7" name="简单容器(DIV)">
          <form:control type="container/div">
            <form:attributes source="container/div">
              <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="12" group="HTML配置" id="span" name="占位数" value="8">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:child xsi:type="form:Group" id="newGroup8" name="简单容器(DIV)">
            <form:control type="container/div">
              <form:attributes source="container/div">
                <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
              </form:attributes>
            </form:control>
            <form:child xsi:type="form:Field" binding="$model.allowReject" id="newField7" name="退回" customize="true">
              <form:control type="widget/checkbox">
                <form:attributes source="widget/checkbox">
                  <dync:attribute default="2" group="HTML设置" id="span" name="控件宽度" value="4">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                  <dync:attribute default="" group="事件设置" id="onChange" name="状态改变" value="newField7_onChange()">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                </form:attributes>
              </form:control>
              <form:validation/>
            </form:child>
            <form:child xsi:type="form:Field" binding="$model.entityactivityconfig.returnActivity" id="newField8" name="退回环节" customize="true">
              <form:control type="widget/select_simple">
                <form:attributes source="widget/select_simple">
                  <dync:attribute default="6" group="基本设置" id="span" name="占位数" value="8">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                  <dync:attribute default="true" group="基本设置" id="show" name="可见" value="">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                  <dync:attribute default="" group="下拉框设置" id="selectOptions" name="选项" value="$model.activities.result">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                  <dync:attribute default="false" group="基本设置" id="selectDisabled" name="禁用" value="!$model.allowReject">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                </form:attributes>
              </form:control>
              <form:validation/>
            </form:child>
          </form:child>
          <form:child xsi:type="form:Group" id="newGroup9" name="简单容器(DIV)">
            <form:control type="container/div">
              <form:attributes source="container/div">
                <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
              </form:attributes>
            </form:control>
            <form:child xsi:type="form:Field" binding="$model.freeChoose" id="newField11" name="自由选择" customize="true">
              <form:control type="widget/checkbox">
                <form:attributes source="widget/checkbox">
                  <dync:attribute default="2" group="HTML设置" id="span" name="控件宽度" value="4">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                  <dync:attribute default="" group="事件设置" id="onChange" name="状态改变" value="newField11_onChange()">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                </form:attributes>
              </form:control>
              <form:validation/>
            </form:child>
            <form:child xsi:type="form:Group" id="newGroup10" name="简单容器(DIV)">
              <form:control type="container/div">
                <form:attributes source="container/div">
                  <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                  <dync:attribute default="12" group="HTML配置" id="span" name="占位数" value="8">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                  <dync:attribute default="" group="HTML配置" id="collapse" name="隐藏" value="!$model.freeChoose">
                    <dync:render/>
                    <dync:children/>
                  </dync:attribute>
                </form:attributes>
              </form:control>
              <form:child xsi:type="form:Field" binding="$model.entityactivityconfig.freechooseUrl" id="newField12" name="选择页面" customize="true">
                <form:control type="widget/text">
                  <form:attributes source="widget/text">
                    <dync:attribute default="true" group="文本框设置" id="show" name="可见" value="">
                      <dync:render/>
                      <dync:children/>
                    </dync:attribute>
                    <dync:attribute default="6" group="基本设置" id="span" name="占位数" value="12">
                      <dync:render/>
                      <dync:children/>
                    </dync:attribute>
                  </form:attributes>
                </form:control>
                <form:validation/>
              </form:child>
              <form:child xsi:type="form:Field" binding="$model.freechooseuser" id="checkbox" name="自由选人" customize="true">
                <form:control type="widget/checkbox">
                  <form:attributes source="widget/checkbox">
                    <dync:attribute default="2" group="HTML设置" id="span" name="控件宽度" value="12">
                      <dync:render colSpan="1" height="0" multi="false" name="text"/>
                      <dync:children/>
                    </dync:attribute>
                    <dync:attribute default="" group="事件设置" id="onChange" name="状态改变" value="checkbox_onChange()">
                      <dync:render colSpan="2" height="0" multi="false" name="event">
                        <dync:item name="params" value=""/>
                      </dync:render>
                      <dync:children/>
                    </dync:attribute>
                    <dync:attribute default="true" group="HTML设置" id="show" name="可见" value="false">
                      <dync:render colSpan="1" height="0" multi="false" name="checkboxAndExpr"/>
                      <dync:children/>
                    </dync:attribute>
                  </form:attributes>
                </form:control>
                <form:validation/>
              </form:child>
            </form:child>
          </form:child>
          <form:child xsi:type="form:Group" id="div1" name="简单容器(DIV)">
            <form:control type="container/div">
              <form:attributes source="container/div">
                <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
                  <dync:render colSpan="2" height="0" multi="false" name="checkbox"/>
                  <dync:children/>
                </dync:attribute>
              </form:attributes>
            </form:control>
            <form:child xsi:type="form:Field" binding="$model.endprocess" id="checkbox1" name="允许结束流程" customize="true">
              <form:control type="widget/checkbox">
                <form:attributes source="widget/checkbox">
                  <dync:attribute default="2" group="HTML设置" id="span" name="控件宽度" value="4">
                    <dync:render colSpan="1" height="0" multi="false" name="text"/>
                    <dync:children/>
                  </dync:attribute>
                  <dync:attribute default="" group="事件设置" id="onChange" name="状态改变" value="checkbox1_onChange()">
                    <dync:render colSpan="2" height="0" multi="false" name="event">
                      <dync:item name="params" value=""/>
                    </dync:render>
                    <dync:children/>
                  </dync:attribute>
                </form:attributes>
              </form:control>
              <form:validation/>
            </form:child>
          </form:child>
        </form:child>
        <form:child xsi:type="form:Field" binding="$model.filtertype" id="filtertypediv" name="处理人策略" customize="true">
          <form:control type="widget/radio_group">
            <form:attributes source="widget/radio_group">
              <dync:attribute default="" group="单选按钮组设置" id="radioOptions" name="选项" value="{&quot;falsefilter&quot;:&quot;无过滤&quot;,&quot;orgfilter&quot;:&quot;按部门过滤&quot;,&quot;orgbossfilter&quot;:&quot;部门分管领导&quot;,&quot;starter&quot;:&quot;分派申请人&quot;,&quot;historyassign&quot;:&quot;历史处理人&quot;}">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="6" group="基本设置" id="span" name="占位数" value="12">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="" group="单选按钮组设置" id="defaultValue" name="默认值" value="falsefilter">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="" group="事件设置" id="clickEvent" name="选中事件" value="filtertypediv_clickEvent(value)">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="75" group="基本设置" id="lableWidth" name="lable宽度" value="150">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:validation/>
        </form:child>
        <form:child xsi:type="form:Group" id="div" name="简单容器(DIV)">
          <form:control type="container/div">
            <form:attributes source="container/div">
              <dync:attribute default="12" group="HTML配置" id="span" name="占位数" value="8">
                <dync:render colSpan="1" height="0" multi="false" name="text"/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="0" group="HTML配置" id="offset" name="偏移" value="4">
                <dync:render colSpan="1" height="0" multi="false" name="text"/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
                <dync:render colSpan="2" height="0" multi="false" name="checkbox"/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:child xsi:type="form:Field" binding="$model.entityactivityconfig.hisAssignActivity" id="selectSimple" name="历史环节" customize="true">
            <form:control type="widget/select_simple">
              <form:attributes source="widget/select_simple">
                <dync:attribute default="true" group="基本设置" id="show" name="可见" value="$model.filtertype == &quot;historyassign&quot;">
                  <dync:render colSpan="1" height="0" multi="false" name="checkboxAndExpr"/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="6" group="基本设置" id="span" name="占位数" value="12">
                  <dync:render colSpan="1" height="0" multi="false" name="text"/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="下拉框设置" id="selectOptions" name="选项" value="$model.activities.result">
                  <dync:render colSpan="1" height="0" multi="false" name="text"/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="false" group="基本设置" id="selectRequired" name="必填项" value="">
                  <dync:render colSpan="1" height="0" multi="false" name="checkboxAndExpr"/>
                  <dync:children/>
                </dync:attribute>
              </form:attributes>
            </form:control>
            <form:validation/>
          </form:child>
        </form:child>
      </form:child>
      <form:child xsi:type="form:Group" id="newTab2" name="通知">
        <form:control type="container/tab">
          <form:attributes source="container/tab"/>
        </form:control>
        <form:child xsi:type="form:Field" id="newField4" name="分派/候选人通知：" customize="true">
          <form:control type="widget/span">
            <form:attributes source="widget/span">
              <dync:attribute default="6" group="基础属性" id="span" name="占位数" value="4">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="false" group="基础属性" id="showLable" name="显示lable" value="true">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="75" group="基础属性" id="lableWidth" name="lable宽度" value="150">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:validation/>
        </form:child>
        <form:child xsi:type="form:Group" id="newGroup2" name="简单容器(DIV)">
          <form:control type="container/div">
            <form:attributes source="container/div">
              <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="12" group="HTML配置" id="span" name="占位数" value="8">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:child xsi:type="form:Field" binding="$model.bind" id="assigneInformType" name="通知方式" customize="true">
            <form:control type="widget/checkbox_group">
              <form:attributes source="widget/checkbox_group">
                <dync:attribute default="6" group="基本设置" id="span" name="占位数" value="12">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="单选按钮组设置" id="checkboxOptions" name="选项" value="$model.a">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="单选按钮组设置" id="optionId" name="值属性名" value="dictdataName">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="单选按钮组设置" id="optionName" name="显示属性名" value="dictdataValue">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
              </form:attributes>
            </form:control>
            <form:validation/>
          </form:child>
        </form:child>
        <form:child xsi:type="form:Field" id="newField5" name="工单状态变化通知：" customize="true">
          <form:control type="widget/span">
            <form:attributes source="widget/span">
              <dync:attribute default="6" group="基础属性" id="span" name="占位数" value="4">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="false" group="基础属性" id="showLable" name="显示lable" value="true">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="75" group="基础属性" id="lableWidth" name="lable宽度" value="150">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:validation/>
        </form:child>
        <form:child xsi:type="form:Group" id="newGroup3" name="简单容器(DIV)">
          <form:control type="container/div">
            <form:attributes source="container/div">
              <dync:attribute default="12" group="HTML配置" id="span" name="占位数" value="8">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:child xsi:type="form:Field" binding="$model.observerStr" id="newField2" name="通知角色" customize="true">
            <form:control type="widget/text">
              <form:attributes source="widget/text">
                <dync:attribute default="6" group="基本设置" id="span" name="占位数" value="12">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="false" group="输入框组" id="inputGroup" name="启用输入框组" value="true">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="iconSelect" group="输入框组" id="groupType" name="组类型" value="customIcon">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="fa-question" group="输入框组" id="customIcon" name="自定义图标" value="fa-users">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="输入框组" id="customEven" name="点击事件" value="newField2_customEven()">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
              </form:attributes>
            </form:control>
            <form:validation/>
          </form:child>
          <form:child xsi:type="form:Field" binding="$model.informScope" id="newField3" name="通知触发范围" customize="true">
            <form:control type="widget/radio_group">
              <form:attributes source="widget/radio_group">
                <dync:attribute default="" group="单选按钮组设置" id="radioOptions" name="选项" value="{&quot;关注此服务产品此环节&quot;:&quot;当前节点&quot;,&quot;关注此服务产品&quot;:&quot;事项&quot;}">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="6" group="基本设置" id="span" name="占位数" value="12">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="false" group="单选按钮组设置" id="firstSelected" name="选中第一个" value="true">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="事件设置" id="clickEvent" name="选中事件" value="newField3_clickEvent(value)">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
              </form:attributes>
            </form:control>
            <form:validation/>
          </form:child>
          <form:child xsi:type="form:Field" binding="$model.bind1" id="concernInformType" name="通知方式" customize="true">
            <form:control type="widget/checkbox_group">
              <form:attributes source="widget/checkbox_group">
                <dync:attribute default="6" group="基本设置" id="span" name="占位数" value="12">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="单选按钮组设置" id="checkboxOptions" name="选项" value="$model.a">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="单选按钮组设置" id="optionId" name="值属性名" value="dictdataName">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="单选按钮组设置" id="optionName" name="显示属性名" value="dictdataValue">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
              </form:attributes>
            </form:control>
            <form:validation/>
          </form:child>
        </form:child>
      </form:child>
      <form:child xsi:type="form:Group" id="newGroup1" name="Tabs">
        <form:control type="container/tab">
          <form:attributes source="container/tab"/>
        </form:control>
        <form:child xsi:type="form:Field" id="newField1" name="显示tab页：" customize="true">
          <form:control type="widget/span">
            <form:attributes source="widget/span">
              <dync:attribute default="6" group="基础属性" id="span" name="占位数" value="4">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="false" group="基础属性" id="showLable" name="显示lable" value="true">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="75" group="基础属性" id="lableWidth" name="lable宽度" value="150">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:validation/>
        </form:child>
        <form:child xsi:type="form:Group" id="newGroup4" name="简单容器(DIV)">
          <form:control type="container/div">
            <form:attributes source="container/div">
              <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="true">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
              <dync:attribute default="12" group="HTML配置" id="span" name="占位数" value="8">
                <dync:render/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:child xsi:type="form:Field" binding="$model.tabs" id="producttabs" name="" customize="true">
            <form:control type="widget/checkbox_group">
              <form:attributes source="widget/checkbox_group">
                <dync:attribute default="" group="单选按钮组设置" id="checkboxOptions" name="选项" value="$model.alltabs.result">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="单选按钮组设置" id="optionId" name="值属性名" value="tabId">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="" group="单选按钮组设置" id="optionName" name="显示属性名" value="title">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="6" group="基本设置" id="span" name="占位数" value="12">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
                <dync:attribute default="75" group="基本设置" id="lableWidth" name="lable宽度" value="10">
                  <dync:render/>
                  <dync:children/>
                </dync:attribute>
              </form:attributes>
            </form:control>
            <form:validation/>
          </form:child>
        </form:child>
      </form:child>
      <form:child xsi:type="form:Group" id="tab" name="自定义属性">
        <form:control type="container/tab">
          <form:attributes source="container/tab"/>
        </form:control>
        <form:child xsi:type="form:Field" binding="$model.customProperty" id="keyValueEditor" name="键值对编辑器" customize="true">
          <form:control type="widget/key_value_editor">
            <form:attributes source="widget/key_value_editor">
              <dync:attribute default="false" group="操作设置" id="cannotSort" name="是否不允许排序" value="true">
                <dync:render colSpan="1" height="0" multi="false" name="checkboxAndExpr"/>
                <dync:children/>
              </dync:attribute>
            </form:attributes>
          </form:control>
          <form:validation/>
        </form:child>
      </form:child>
    </form:child>
  </form:child>
  <form:child xsi:type="form:Group" id="newGroup5" name="对话框工具条">
    <form:control type="container/toolbar_modal_footer">
      <form:attributes source="container/toolbar_modal_footer"/>
    </form:control>
    <form:child xsi:type="form:Field" id="newField9" name="确定" customize="true">
      <form:control type="widget/button">
        <form:attributes source="widget/button">
          <dync:attribute default="" group="事件设置" id="click" name="点击事件" value="newField9_click($event)">
            <dync:render/>
            <dync:children/>
          </dync:attribute>
        </form:attributes>
      </form:control>
      <form:validation/>
    </form:child>
    <form:child xsi:type="form:Field" id="newField10" name="取消" customize="true">
      <form:control type="widget/button">
        <form:attributes source="widget/button">
          <dync:attribute default="" group="事件设置" id="click" name="点击事件" value="newField10_click($event)">
            <dync:render/>
            <dync:children/>
          </dync:attribute>
        </form:attributes>
      </form:control>
      <form:validation/>
    </form:child>
  </form:child>
  <form:datasources>
    <form:datasource xsi:type="form:Inputs"/>
    <form:datasource xsi:type="form:LogicDataSource" id="dictdata" name="字典数据" logic="rule:com.chinacreator.c2.sysmgr.dict.getDictDataMap" sn="getDictDataMap">
      <form:param id="dictTypeNames" name="字典名称数组" value="['工作流_通知方式']"/>
    </form:datasource>
    <form:datasource xsi:type="form:TreeDataSource" id="tree" name="树型数据源" impl="com.chinacreator.c2.workflow.workflowManage.ds.CandidateChooseTreeContentProvider" type="custom"/>
    <form:datasource xsi:type="form:EntityDataSource" id="entity" name="单实体数据源" data="" entity="entity:com.chinacreator.c2.qyb.workflow.config.entity.UserConcernedConfig"/>
    <form:datasource xsi:type="form:LogicDataSource" id="alltabs" name="所有页签" logic="rule:com.chinacreator.c2.qyb.workflow.tab.getAllTabsForProduct" sn="getalltabforproduct">
      <form:param id="productId" name="新输入参数" value="$params.moduleId"/>
    </form:datasource>
    <form:datasource xsi:type="form:LogicDataSource" id="activities" name="所有活动" logic="rule:com.chinacreator.c2.qyb.workflow.process.getActivitiesFromProcDef" sn="getactivitiesfromprocdef">
      <form:param id="procDefId" name="新输入参数" value="$params.processDefId"/>
    </form:datasource>
  </form:datasources>
  <form:scripts>

newField1_onChange:function(){
/*	$model.entityactivityconfig.isPhonemsgInform = true;
	$model.entityactivityconfig.isEmailInform = true;
	$model.entityactivityconfig.informType = kcompglobal.workinformtype.phonemsg.value+&quot;,&quot;+kcompglobal.workinformtype.email.value;*/
},

page_afterDataSourceLoad:function(){
	$model.customProperty = []
	
//	console.log(&quot;alltabs&quot;,$model.alltabs.result);
//	console.log(&quot;params&quot;,$params);
//	console.log(&quot;activities&quot;,$model.activities.result);
	$model.a = $model.dictdata.result['工作流_通知方式'];
	var con = {};
	con.moduleId = $params.serviceProduct.productId;
	con.taskDefId = $params.activityId;
	$http.post(&quot;ws/getactivityconfigbycon&quot;,{con:con}).success(function(data){
		console.log(&quot;service geted data&quot;,data);
		$model.entityactivityconfig = data.result;
		if(angular.isUndefined($model.entityactivityconfig.taskDefId)){
			$model.entityactivityconfig.taskDefId = $params.activityId;
		}
		if(!angular.isUndefined($model.entityactivityconfig.informType)){
			console.log(&quot;activity config entity geted&quot;,$model.entityactivityconfig);
			var informs = $model.entityactivityconfig.informType.split(&quot;,&quot;);
			var options = $view.assigneInformType.getOptions();
			angular.forEach(options,function(v){				
				for(x in informs){
					if(informs[x]==v.value){
						v.checked = true;
					}
				}
			});					
		}	
		//tabs
		if(!angular.isUndefined($model.entityactivityconfig.includeTabs)){						
			var tabs = $model.entityactivityconfig.includeTabs.split(&quot;,&quot;);
			var taboptions = $view.producttabs.getOptions();	
			angular.forEach(taboptions,function(v){				
				for(x in tabs){
					if(tabs[x]==v.value){
						v.checked = true;
					}
				}
			});
		}	
		var customPropertyStr = $model.entityactivityconfig.includeActions;
		var returnindex = functions.has_action(&quot;return&quot;);
		customPropertyStr = functions.del_action(&quot;return&quot;,customPropertyStr);
		if(returnindex==undefined){
			$model.allowReject = false;
		}else{
			$model.allowReject = true;
		}
		var returnindex = functions.has_action(&quot;freechoose&quot;);
		customPropertyStr = functions.del_action(&quot;freechoose&quot;,customPropertyStr);
		if(returnindex==undefined){
			$model.freeChoose = false;
			$model.entityactivityconfig.freeshooseUrl = &quot;f/choosetaskhandler&quot;;
		}else{
			$model.freeChoose = true;
		}	
		var filtervalue = functions.get_action(&quot;filtertype&quot;);
		customPropertyStr = functions.del_action(&quot;filtertype&quot;,customPropertyStr);
		console.log(&quot;saved filtervalue&quot;,filtervalue);
		if(filtervalue){
			var kvs = filtervalue.split(&quot;:&quot;);
			var value = kvs[1];
			$model.filtertype = value;
		}
		
		//自由选人
		var fcuindex = functions.has_action(&quot;freechooseuser&quot;);
		customPropertyStr = functions.del_action(&quot;freechooseuser&quot;,customPropertyStr);
		
		if(fcuindex==undefined){
			$model.freechooseuser = false;
		}else{
			$model.freechooseuser = true;
		}	
		
		//允许结束
		var epuindex = functions.has_action(&quot;endprocess&quot;);
		customPropertyStr = functions.del_action(&quot;endprocess&quot;,customPropertyStr);
		
		if(epuindex==undefined){
			$model.endprocess = false;
		}else{
			$model.endprocess = true;
		}

		var customPropertys = customPropertyStr.split(&quot;,&quot;)
		angular.forEach(customPropertys,function(v){
			if(v != undefined &amp;&amp;　v != &quot;&quot;){
				var kv = v.split(&quot;:&quot;);
				var key = kv[0];
				//这里为什么要删除呢 因为没有做自定义属性的 添加删除监听事件 所以del all and add all
				functions.del_action(key)			
			}
		});		
		functions.expand_customProperty(customPropertyStr);					
	});
	
	

//用户关注设置		
	var con = {};
	con.taskDefId = $params.activityId;
	con.processDefId = $params.moduleId;
	con.remark1 = &quot;activiyconfig&quot;;
	$http.post(&quot;ws/getuserconcernconfigforactivity&quot;,{u:con})
		.success(function(a){
			functions.do_view(a.result);
			$model.obseverId = $model.observerId;
//			console.log(&quot;retruned a is &quot;,a);
		});
		

},

page_onload:function(){
	$model.activity_Name = $params.activity_name;	
},
// save
newField9_click:function($event){
	functions.assemble_customProperty()
//infromType 字段取到，不同方式以逗号分隔
	var result;
	var options = $view.assigneInformType.getOptions();
	angular.forEach(options,function(v){	
		if(v.checked==true){
			if(angular.isUndefined(result)){
				result = v.value;
			}else{
				result = result+&quot;,&quot;+v.value;
			}
		}
	});	
	
	
	
	var concernInforms;
	var options = $view.concernInformType.getOptions();
	angular.forEach(options,function(v){	
		if(v.checked==true){
			if(angular.isUndefined(concernInforms)){
				concernInforms = v.value;
			}else{
				concernInforms = concernInforms+&quot;,&quot;+v.value;
			}
		}
	});	
	
	var selectedtabs;
	var taboptions = $view.producttabs.getOptions();	
	angular.forEach(taboptions,function(v){	
		if(v.checked==true){
			if(angular.isUndefined(selectedtabs)){
				selectedtabs = v.value;
			}else{
				selectedtabs = selectedtabs+&quot;,&quot;+v.value;
			}
		}
	});
//	console.log(&quot;selected tabs in front&quot;,selectedtabs);
	
	$model.entityactivityconfig.informType = angular.isUndefined(result)?&quot;&quot;:result;
	$model.entityactivityconfig.includeTabs = angular.isUndefined(selectedtabs)?&quot;&quot;:selectedtabs;
	//4 dev
	$model.entityactivityconfig.moduleId = $params.serviceProduct.productId;
//	console.log(&quot;entity before save&quot;,$model.entityactivityconfig);

	$http.post(&quot;ws/saveactivityconfig&quot;,{activityConfig:$model.entityactivityconfig}).success(function(data){
		Messenger.post({type:'success',message:'保存成功'});
		Modal.instance.close();		
	});
	//用户关注设置
	var con = {};
	con.taskDefId = $params.activityId;
	con.processDefId = $params.moduleId;
	con.remark1 = &quot;activiyconfig&quot;;	
	con.informType = concernInforms;
	con.observerId = $model.observerId;
	con.catogory = $model.catogory;
	con.remark2 = $model.observerStr;
	console.log(&quot;concern config before submit&quot;,con);
	$http.post(&quot;ws/operateuserconcernconfigforactivity&quot;,{action:$model.informScope,u:con});
},

newField10_click:function($event){
	Modal.instance.dismiss();
},
//选择人/组
newField2_customEven:function(){
	var selectedUserIds = $model.selectedUserIds
	var selectedGroupIds = $model.selectedGroupIds
	Modal.open('f/mychoosecandidate?selectedUserIds='+selectedUserIds+'&amp;selectedGroupIds='+selectedGroupIds
			,{selectedUserIds:selectedUserIds, selectedGroupIds:selectedGroupIds},function(data){
				console.log(&quot;choosed user group&quot;,data);
				if(data){
					if(data.userIds){
						var strId =&quot;&quot;;
						var str =&quot;&quot;;
						var userIdArray = functions.array_unique(data.userIds);
						var userNameArray = functions.array_unique(data.userNames);
						var kvJson = {};
						for(var i in userIdArray){
							kvJson[userIdArray[i]]=userNameArray[i];
						}		
						for(var i in userIdArray){
							strId+=userIdArray[i]+&quot;,&quot;;
							str+=kvJson[userIdArray[i]]+&quot;,&quot;;
						}
						if(strId!=&quot;&quot;){
							strId = strId.substring(0,strId.length-1);
						}
						$model.observerId = strId;
						$model.catogory = &quot;user&quot;;
						if(str!=&quot;&quot;){
							str = str.substring(0,str.length-1);
						}
						$model.observerStr = &quot;用户【&quot;+str+&quot;】&quot;;
						$model.selectedUserIds = strId
						

						
					}
					if(data.groupIds){
						var str =&quot;&quot;;
						for(var i in data.groupNames){
							str+=data.groupNames[i]+&quot;,&quot;;
						}
						if(str!=&quot;&quot;){
							str = str.substring(0,str.length-1);
						}
						$model.observerStr = &quot;组【&quot;+str+&quot;】&quot;;
						var strId =&quot;&quot;;
						for(var i in data.groupIds){
							strId+=data.groupIds[i]+&quot;,&quot;;
						}
						if(strId!=&quot;&quot;){
							strId = strId.substring(0,strId.length-1);
						}
						$model.observerId = strId;
						$model.selectedGroupIds = strId
						$model.catogory = &quot;group&quot;;

					}
				}else{
/*					$(&quot;#activity_performer&quot;).val('');
					$(&quot;#activity_performer_hidden_group&quot;).val('');
					$(&quot;#activity_performer_hidden&quot;).val('');*/
				}			
			});
},

newField3_clickEvent:function(value){
	if(value==&quot;关注此服务产品此环节&quot;){
		var con = {};
		con.taskDefId = $params.activityId;
		con.processDefId = $params.moduleId;
		con.remark1 = &quot;activiyconfig&quot;;
		$http.post(&quot;ws/getuserconcernconfigforactivity&quot;,{u:con})
			.success(function(a){
				functions.do_view(a.result);
				$model.obseverId = $model.observerId;
				console.log(&quot;retruned a is &quot;,a);
			});		
	}else if(value==&quot;关注此服务产品&quot;){
		var con = {};
		con.processDefId = $params.moduleId;
		con.remark1 = &quot;activiyconfig&quot;;
		$http.post(&quot;ws/getuserconcernconfigforactivity&quot;,{u:con})
			.success(function(a){
				functions.do_view(a.result);
				$model.obseverId = $model.observerId;
				console.log(&quot;retruned a is &quot;,a);
			});
	}

},
do_view:function(a){
//	console.log(&quot;do view in&quot;,a);
	var observerStr = a.remark2;
	$model.observerId = a.observerId
	$model.catogory = a.catogory
	if($model.catogory == &quot;user&quot;){
		$model.selectedUserIds = a.observerId
	}else if($model.catogory == &quot;group&quot;){
		$model.selectedGroupIds = a.observerId
	}
	$model.observerStr = observerStr;
	if(!angular.isUndefined(a.informType)){
		var informs = a.informType.split(&quot;,&quot;);
		var options = $view.concernInformType.getOptions();
		angular.forEach(options,function(v){
			v.checked = false;				
			for(x in informs){
				if(informs[x]==v.value){
					v.checked = true;
				}
			}
		});	
	}else{
		var options = $view.concernInformType.getOptions();
		angular.forEach(options,function(v){
			v.checked = false;				
		});
	}

},
add_action:function(action,value){
	if($model.entityactivityconfig.includeActions==undefined||$model.entityactivityconfig.includeActions==&quot;&quot;){
		$model.entityactivityconfig.includeActions = value;
	}else{
		this.del_action(action);
		$model.entityactivityconfig.includeActions = $model.entityactivityconfig.includeActions+&quot;,&quot;+value;
	}
},
get_action:function(action){
	var a = $model.entityactivityconfig.includeActions.split(&quot;,&quot;);
	for(var i=0;i&lt;a.length;i++){
		if(a[i].match(action)){
			return a[i];
		}
	}
},
has_action:function(action){
	if(!$model.entityactivityconfig.includeActions){
		return undefined
	}
	var a = $model.entityactivityconfig.includeActions.split(&quot;,&quot;);
	var index = undefined;
	for(var i=0;i&lt;a.length;i++){
		if(a[i].match(action)){
			index = i;
			break;
		}
	}
	return index;
},
del_action:function(action,actions){
	if(actions != undefined){
		var a = actions.split(&quot;,&quot;);
		var index = undefined;
		for(var i=0;i&lt;a.length;i++){
			if(a[i].match(action)){
				index = i;
				break;
			}
		}
		if(index!=undefined){
			a.splice(index,1);
			return a.join(&quot;,&quot;)
		}else{
			return actions
		}
	}else if($model.entityactivityconfig.includeActions!=undefined){
		var a = $model.entityactivityconfig.includeActions.split(&quot;,&quot;);
		var index = undefined;
		for(var i=0;i&lt;a.length;i++){
			if(a[i].match(action)){
				index = i;
				break;
			}
		}
		if(index!=undefined){
			a.splice(index,1);
			$model.entityactivityconfig.includeActions = a.join(&quot;,&quot;)
		}					
	}
},
newField7_onChange:function(){
	if($model.allowReject){
		this.add_action(&quot;return&quot;,&quot;return&quot;);
	}else{
		$model.entityactivityconfig.returnActivity = undefined;
		this.del_action(&quot;return&quot;);
	}
//	console.log(&quot;actions&quot;,$model.entityactivityconfig.includeActions);
},

newField11_onChange:function(){
	if($model.freeChoose){
		this.add_action(&quot;freechoose&quot;,&quot;freechoose&quot;);
	}else{
		if($model.entityactivityconfig.freeChooseUrl == undefined){
			$model.entityactivityconfig.freeChooseUrl = &quot;f/choosetaskhandler&quot;;
		}	
		this.del_action(&quot;freechoose&quot;);
	}	
	console.log(&quot;actions&quot;,$model.entityactivityconfig.includeActions);
},
//组装action字符串。组装成 key:value 或 key:value1|value2 的形式
assemble_action:function(key,value,arrayvalues){
	//value是单个值
	if(value!=undefined){
		return key+&quot;:&quot;+value;
	}
	//value是多个值
	if(arrayvalues instanceof Array){
		var result = &quot;&quot;;
		for(var i=0;i&lt;arrayvalues.length;i++){
			result = result + &quot;|&quot; + arrayvalues[i]
		}
		return key+&quot;:&quot;+result;
	}
},
//过滤选中事件
filtertypediv_clickEvent:function(value){
	if(value!=&quot;falsefilter&quot;){
		console.log(&quot;selected filter&quot;,value);
		var action = functions.assemble_action(&quot;filtertype&quot;,value);
		this.add_action(&quot;filtertype&quot;,action);
	}else{
		this.del_action(&quot;filtertype&quot;);
	}
//	console.log(&quot;actions&quot;,$model.entityactivityconfig.includeActions);	
},
//自由选人
checkbox_onChange:function(){
	if($model.freechooseuser){
		this.add_action(&quot;freechooseuser&quot;,&quot;freechooseuser&quot;);
	}else{	
		this.del_action(&quot;freechooseuser&quot;);
	}
//	console.log(&quot;actions&quot;,$model.entityactivityconfig.includeActions);
},
//允许结束值变换
checkbox1_onChange:function(){
	if($model.endprocess){
		this.add_action(&quot;endprocess&quot;,&quot;endprocess&quot;);
	}else{	
		this.del_action(&quot;endprocess&quot;);
	}	
//	console.log(&quot;actions&quot;,$model.entityactivityconfig.includeActions);	
},
//自定义属性组装
assemble_customProperty:function(){

	if($model.entityactivityconfig.includeActions == undefined){
		$model.entityactivityconfig.includeActions = &quot;&quot;
	}
	angular.forEach($model.customProperty,function(v){
		if(v.name != undefined &amp;&amp; v.name != &quot;&quot;
			&amp;&amp; v.value != undefined &amp;&amp; v.name != &quot;&quot;){
			var property = v.name+&quot;:&quot;+v.value
			if($model.entityactivityconfig.includeActions == &quot;&quot;){
				$model.entityactivityconfig.includeActions = property
			}else{
				$model.entityactivityconfig.includeActions = $model.entityactivityconfig.includeActions + &quot;,&quot; + property
			}			
		}
	});
},
//自定义属性展开
expand_customProperty(value){
	var a = value.split(&quot;,&quot;);
	angular.forEach(a,function(v){	
		var kv = v.split(&quot;:&quot;);
		var key = kv[0];
		var value = kv[1];
		var o = {}
		o.name = key
		o.value = value
		$model.customProperty.push(o)
	});
},
array_unique:function(array){
	
	var n = []; //一个新的临时数组
	for(var i = 0; i &lt; array.length; i++) //遍历当前数组
	{
		//如果当前数组的第i已经保存进了临时数组，那么跳过，
		//否则把当前项push到临时数组里面
		if (n.indexOf(array[i]) == -1) n.push(array[i]);
	}
	return n;

},</form:scripts>
  <form:htmls>
</form:htmls>
</form:Form>
